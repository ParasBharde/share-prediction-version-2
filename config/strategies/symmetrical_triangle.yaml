# Symmetrical Triangle Breakout Strategy
# Detects convergence of descending resistance + ascending support.
# Signals BUY on upside breakout from the apex zone.
#
# Edge: Symmetrical triangles represent a compression of volatility.
# The breakout direction — confirmed here as bullish by the uptrend filter —
# is typically explosive and provides a clean risk-defined setup.

strategy:
  name: "Symmetrical Triangle"
  version: "1.0"
  enabled: true
  mode: "daily"
  priority: 6
  description: >
    Identifies symmetrical triangles by fitting regression lines through
    pivot highs (descending) and pivot lows (ascending).  Signals BUY
    when price closes above the resistance trendline, confirming an upside
    breakout.  Requires the stock to be in a primary uptrend (above 50 EMA).

  params:
    # ── Pattern Detection ─────────────────────────────────────────────────
    pattern_lookback: 50          # Candles to scan for the triangle
    min_pivot_points: 2           # Minimum pivots on each trendline
    pivot_order: 3                # Local high/low detection sensitivity
    max_apex_distance_pct: 3.0    # Breakout must be within 3% of apex

    # ── Trendline Quality ─────────────────────────────────────────────────
    min_r_squared: 0.70           # R² of regression fit on pivots
    resistance_max_slope: -0.05   # Upper line must slope downward
    support_min_slope: 0.05       # Lower line must slope upward

    # ── Volume ────────────────────────────────────────────────────────────
    breakout_vol_multiplier: 1.3
    vol_avg_period: 20

    # ── Trend Filter ──────────────────────────────────────────────────────
    require_uptrend: true
    trend_ema_period: 50

    # ── Target & Stop Loss ────────────────────────────────────────────────
    target_pct: 8.0               # Measured move = pole height
    stop_loss_pct: 3.0
    max_stop_loss_pct: 5.0
    use_support_line_sl: true     # SL at support trendline at breakout bar

data:
  timeframe: "1D"
  lookback_bars: 200

filters:
  market_cap_min: 500
  avg_volume_min: 100000
  price_min: 30
  price_max: 10000

indicators:
  - name: "Symmetrical Triangle Pattern"
    type: "price_pattern"
    params:
      min_pivots: 2
      min_r_squared: 0.70
    weight: 0.45

  - name: "Resistance Breakout"
    type: "price_pattern"
    params:
      confirm_close: true
    weight: 0.30

  - name: "Volume Confirmation"
    type: "volume_analysis"
    params:
      min_ratio: 1.3
    weight: 0.25

signal_generation:
  min_conditions_met: 3
  confidence_threshold: 0.65
  signal_type: "BUY"

risk_management:
  stop_loss:
    type: "configurable"
    default_percent: 3.0
    max_percent: 5.0
  target:
    type: "fixed_percent"
    percent: 8.0
  position_size:
    type: "risk_based"
    risk_per_trade_percent: 1
  max_concurrent_positions: 5

backtesting:
  start_date: "2023-01-01"
  end_date: "2026-01-31"
  initial_capital: 100000
  commission_percent: 0.03
  slippage_percent: 0.10
  min_win_rate: 0.55
  min_sharpe_ratio: 1.5
  max_drawdown: 15

alerts:
  enabled: true
  priority: "HIGH"
