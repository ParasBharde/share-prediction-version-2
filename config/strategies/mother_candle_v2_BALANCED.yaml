# Mother Candle Breakout V2 - STRICT CONFIG
# This config will DEFINITELY reject SICALLOG and similar false signals
# Last Modified: 2026-02-13 (STRICT VERSION)

strategy:
  name: "Mother Candle V2"
  version: "2.2"
  enabled: true
  mode: "daily"
  priority: 5
  description: >
    STRICT Mother Candle strategy with robust filters.
    Will reject weak breakouts, downtrends, and poor position structures.
    Designed to produce fewer but MUCH higher quality signals.

  params:
    # --- Pattern Detection ---
    max_lookback: 20
    min_baby_candles: 2
    mother_range_multiplier: 1.5
    baby_tolerance_pct: 0.1

    # --- Volume Confirmation ---
    mother_vol_multiplier: 1.3
    breakout_vol_multiplier: 1.2

    # --- Target & Stop Loss ---
    target_pct: 5.0
    stop_loss_pct: 3.0
    max_stop_loss_pct: 5.0
    use_mother_low_sl: true

    # ═══════════════════════════════════════════════════════════════
    # STRICT FILTERS - WILL REJECT FALSE SIGNALS
    # ═══════════════════════════════════════════════════════════════

    # 1. TREND FILTER - STRICT
    require_uptrend: true
    trend_ema_period: 50
    price_above_ema_pct: 3.0          # ✓ STRICT: Must be 3% above EMA
    min_ema_slope_pct: -0.5           # ✓ NEW: EMA must not be falling
    
    # 2. MINIMUM BREAKOUT STRENGTH - STRICT  
    min_breakout_pct: 1.0             # ✓ STRICT: Must be 1% above Mother
    max_entry_buffer_pct: 2.0
    
    # 3. PRICE STRUCTURE FILTER - STRICT
    mother_position_filter: true
    recent_high_lookback: 30
    mother_near_high_pct: 10
    
    # 4. FAILED BREAKOUT CHECK
    check_failed_breakouts: true
    failed_breakout_lookback: 10
    
    # 5. ATR VALIDATION
    min_atr_pct: 1.0
    atr_period: 14

data:
  timeframe: "1D"
  lookback_bars: 200

filters:
  market_cap_min: 500
  market_cap_max: null
  avg_volume_min: 200000
  price_min: 30
  price_max: 10000

indicators:
  - name: "Mother Candle Pattern"
    type: "price_pattern"
    params:
      min_babies: 2
      max_lookback: 20
    weight: 0.15

  - name: "Fresh Breakout"
    type: "price_pattern"
    params:
      min_strength_pct: 1.0
    weight: 0.15

  - name: "Mother Volume"
    type: "volume_analysis"
    params:
      min_ratio: 1.3
    weight: 0.15

  - name: "Breakout Volume"
    type: "volume_analysis"
    params:
      min_ratio: 1.2
    weight: 0.15

  - name: "Trend Filter"
    type: "trend_analysis"
    params:
      ema_period: 50
      price_above_ema: true
      min_pct_above: 3.0
    weight: 0.20

  - name: "Volatility Filter"
    type: "volatility_analysis"
    params:
      min_atr_pct: 1.0
    weight: 0.20

signal_generation:
  min_conditions_met: 6
  confidence_threshold: 0.70
  signal_type: "BUY"

risk_management:
  stop_loss:
    type: "configurable"
    default_percent: 3.0
    max_percent: 5.0
    use_mother_low: true
  target:
    type: "fixed_percent"
    percent: 5.0
  position_size:
    type: "risk_based"
    risk_per_trade_percent: 1
  max_concurrent_positions: 5

backtesting:
  start_date: "2023-01-01"
  end_date: "2026-01-31"
  initial_capital: 100000
  commission_percent: 0.03
  slippage_percent: 0.10
  min_win_rate: 0.60
  min_sharpe_ratio: 1.8
  max_drawdown: 12

alerts:
  enabled: true
  priority: "HIGH"