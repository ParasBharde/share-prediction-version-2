# System-wide configuration
# Purpose: Central configuration for all system parameters
# Modified by: Admin only
# Read by: All components

system:
  name: "AlgoTrade Scanner"
  version: "1.0.0"
  environment: "production"  # development, staging, production
  timezone: "Asia/Kolkata"

scanning:
  # Stock universe to scan
  universe: "ALL"  # Options: NIFTY50, NIFTY100, NIFTY500, ALL

  # Signal type filter - only send alerts/trades for these signal types
  # BOTH: required for bearish options (BUY_PE) to reach Telegram
  signal_type_filter: "BOTH"  # Options: BUY, SELL, BOTH

  # Scanning schedule (IST)
  # ── BTST Timing Rationale ─────────────────────────────────────────────────
  # Scan begins at 15:15 IST so 2700+ stocks (NIFTY 500 + Midcap + Smallcap)
  # are processed in time.  Signals are ready by ~15:25, giving a 5-minute
  # window to place BTST orders before the 15:30 market close.
  schedule:
    enabled: true
    time: "15:15"  # BTST window: signals ready by 15:25, orders before 15:30
    weekdays: [0, 1, 2, 3, 4]  # Monday=0, Friday=4

  # Strategy selection
  strategies:
    mode: "all"  # "all" = run every enabled strategy, "selected" = only listed ones
    selected: []  # Strategy names to run when mode is "selected"
    # Example:
    #   mode: "selected"
    #   selected: ["Momentum Breakout", "Mother Candle"]

  # Parallel processing
  max_workers: 8  # CPU cores - 1
  timeout_per_stock: 30  # seconds
  chunk_size: 50  # stocks per batch

data:
  # Historical data retention
  ohlcv_retention_days: 730  # 2 years

  # Cache settings
  cache_ttl_intraday: 300  # 5 minutes
  cache_ttl_eod: 86400  # 1 day

  # Data quality thresholds
  max_price_change_percent: 20  # Flag if price moves >20% in 1 day
  min_volume_threshold: 1000  # Minimum daily volume

monitoring:
  prometheus_port: 9090
  health_check_interval: 30  # seconds

  # Sentry configuration
  sentry:
    enabled: true
    dsn: "${SENTRY_DSN}"  # From environment variable
    traces_sample_rate: 0.1

position_sizing:
  # Used to compute suggested share quantity shown in Telegram alerts.
  # qty = (default_capital * risk_per_trade_pct / 100) / (entry - stop_loss)
  default_capital: 1000000     # ₹10 lakh notional portfolio
  risk_per_trade_pct: 1.0      # 1 % of capital at risk per trade = ₹10,000

database:
  # Connection pooling
  pool_size: 20
  max_overflow: 10
  pool_timeout: 30
  pool_recycle: 3600  # Recycle connections every hour

  # Health checks
  health_check_interval: 60  # seconds
  max_retry_attempts: 3
